<!DOCTYPE html>

<html class="writer-html5" lang="en">
<head>
<meta charset="utf-8"/><meta content="Docutils 0.17.1: http://docutils.sourceforge.net/" name="generator"/>
<meta content="RoomManager" property="og:title"/>
<meta content="website" property="og:type"/>
<meta content="classes/class_roommanager.html" property="og:url"/>
<meta content="Godot Engine documentation" property="og:site_name"/>
<meta content="Inherits: Spatial&lt; Node&lt; Object The RoomManager node is used to control the portal culling system. Description: In order to utilize the portal occlusion culling system, you must build your level us..." property="og:description"/>
<meta content="The RoomManager node is used to control the portal culling system. In order to utilize the portal occlusion culling system, you must build your level using Rooms and Portals. Before these can be used at runtime, they..." name="description"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"><title>(DEV) RoomManager — Godot Engine (3.4) documentation in English</title>
<link href="../_static/pygments.css" rel="stylesheet" type="text/css"/>
<link href="../_static/css/theme.css" rel="stylesheet" type="text/css"/>
<link href="../_static/tabs.css" rel="stylesheet" type="text/css"/>
<link href="../_static/css/custom.css" rel="stylesheet" type="text/css"/>
<!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
<script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
<script src="../_static/jquery.js"></script>
<script src="../_static/underscore.js"></script>
<script src="../_static/doctools.js"></script>
<script src="../_static/js/custom.js"></script>
<script src="../_static/js/theme.js"></script><meta content="#3d8fcc" name="theme-color"/>
<link href="https://docs.godotengine.org/en/stable/classes/class_roommanager.html" hreflang="en" rel="alternate"/>
<link href="https://docs.godotengine.org/de/stable/classes/class_roommanager.html" hreflang="de" rel="alternate"/>
<link href="https://docs.godotengine.org/es/stable/classes/class_roommanager.html" hreflang="es" rel="alternate"/>
<link href="https://docs.godotengine.org/fr/stable/classes/class_roommanager.html" hreflang="fr" rel="alternate"/>
<link href="https://docs.godotengine.org/fi/stable/classes/class_roommanager.html" hreflang="fi" rel="alternate"/>
<link href="https://docs.godotengine.org/it/stable/classes/class_roommanager.html" hreflang="it" rel="alternate"/>
<link href="https://docs.godotengine.org/ja/stable/classes/class_roommanager.html" hreflang="ja" rel="alternate"/>
<link href="https://docs.godotengine.org/ko/stable/classes/class_roommanager.html" hreflang="ko" rel="alternate"/>
<link href="https://docs.godotengine.org/pl/stable/classes/class_roommanager.html" hreflang="pl" rel="alternate"/>
<link href="https://docs.godotengine.org/pt_BR/stable/classes/class_roommanager.html" hreflang="pt-br" rel="alternate"/>
<link href="https://docs.godotengine.org/ru/stable/classes/class_roommanager.html" hreflang="ru" rel="alternate"/>
<link href="https://docs.godotengine.org/uk/stable/classes/class_roommanager.html" hreflang="uk" rel="alternate"/>
<link href="https://docs.godotengine.org/zh_CN/stable/classes/class_roommanager.html" hreflang="zh-cn" rel="alternate"/>
<link href="https://docs.godotengine.org/zh_TW/stable/classes/class_roommanager.html" hreflang="zh-tw" rel="alternate"/>
<link href="https://docs.godotengine.org/en/stable/classes/class_roommanager.html" hreflang="x-default" rel="alternate"/>
<link href="https://docs.godotengine.org/en/stable/classes/class_roommanager.html" rel="canonical"/>
<link href="../genindex.html" rel="index" title="Index"/>
<link href="../search.html" rel="search" title="Search"/>
<link href="class_rootmotionview.html" rel="next" title="RootMotionView"/>
<link href="class_roomgroup.html" rel="prev" title="RoomGroup"/>
</meta></head>
<body class="wy-body-for-nav">
<div class="wy-grid-for-nav">

<section class="wy-nav-content-wrap" data-toggle="wy-nav-shift"><nav aria-label="Mobile navigation menu" class="wy-nav-top">
<i class="fa fa-bars" data-toggle="wy-nav-top"></i>
<a href="../index.html">Godot Engine</a>
</nav>
<div class="wy-nav-content">
<div class="rst-content">
<div aria-label="Page navigation" role="navigation">
<ul class="wy-breadcrumbs">
<li><a class="icon icon-home" href="../index.html"></a> »</li>
<li><a href="index.html">Godot API</a> »</li>
<li>RoomManager</li>
</ul>
<hr/>
</div>
<div class="document" itemscope="itemscope" itemtype="http://schema.org/Article" role="main">
<div itemprop="articleBody">
<section id="roommanager">
<span id="class-roommanager"></span><h1><a class="dashAnchor" name="//apple_ref/cpp/Class/RoomManager¶"></a>RoomManager<a class="headerlink" href="#roommanager" title="Permalink to this headline">¶</a></h1>
<p><strong>Inherits:</strong> <a class="reference internal" href="class_spatial.html#class-spatial"><span class="std std-ref">Spatial</span></a> <strong>&lt;</strong> <a class="reference internal" href="class_node.html#class-node"><span class="std std-ref">Node</span></a> <strong>&lt;</strong> <a class="reference internal" href="class_object.html#class-object"><span class="std std-ref">Object</span></a></p>
<p>The RoomManager node is used to control the portal culling system.</p>
<section id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>In order to utilize the portal occlusion culling system, you must build your level using <a class="reference internal" href="class_room.html#class-room"><span class="std std-ref">Room</span></a>s and <a class="reference internal" href="class_portal.html#class-portal"><span class="std std-ref">Portal</span></a>s. Before these can be used at runtime, they must undergo a short conversion process to build the <code class="docutils literal notranslate"><span class="pre">room</span> <span class="pre">graph</span></code>, runtime data needed for portal culling. The <code class="docutils literal notranslate"><span class="pre">room</span> <span class="pre">graph</span></code> is controlled by the <code class="docutils literal notranslate"><span class="pre">RoomManager</span></code> node, and the <code class="docutils literal notranslate"><span class="pre">RoomManager</span></code> also contains settings that are common throughout the portal system.</p>
</section>
<section id="properties">
<h2>Properties<a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 26%"/>
<col style="width: 55%"/>
<col style="width: 19%"/>
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="class_bool.html#class-bool"><span class="std std-ref">bool</span></a></p></td>
<td><p><a class="reference internal" href="#class-roommanager-property-active"><span class="std std-ref">active</span></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="class_bool.html#class-bool"><span class="std std-ref">bool</span></a></p></td>
<td><p><a class="reference internal" href="#class-roommanager-property-debug-sprawl"><span class="std std-ref">debug_sprawl</span></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="class_float.html#class-float"><span class="std std-ref">float</span></a></p></td>
<td><p><a class="reference internal" href="#class-roommanager-property-default-portal-margin"><span class="std std-ref">default_portal_margin</span></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1.0</span></code></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="class_bool.html#class-bool"><span class="std std-ref">bool</span></a></p></td>
<td><p><a class="reference internal" href="#class-roommanager-property-gameplay-monitor"><span class="std std-ref">gameplay_monitor</span></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="class_bool.html#class-bool"><span class="std std-ref">bool</span></a></p></td>
<td><p><a class="reference internal" href="#class-roommanager-property-merge-meshes"><span class="std std-ref">merge_meshes</span></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="class_int.html#class-int"><span class="std std-ref">int</span></a></p></td>
<td><p><a class="reference internal" href="#class-roommanager-property-overlap-warning-threshold"><span class="std std-ref">overlap_warning_threshold</span></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="class_int.html#class-int"><span class="std std-ref">int</span></a></p></td>
<td><p><a class="reference internal" href="#class-roommanager-property-portal-depth-limit"><span class="std std-ref">portal_depth_limit</span></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">16</span></code></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="class_nodepath.html#class-nodepath"><span class="std std-ref">NodePath</span></a></p></td>
<td><p><a class="reference internal" href="#class-roommanager-property-preview-camera"><span class="std std-ref">preview_camera</span></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">NodePath("")</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="class_int.html#class-int"><span class="std std-ref">int</span></a></p></td>
<td><p>process_priority</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">10000</span></code> <em>(parent override)</em></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#enum-roommanager-pvsmode"><span class="std std-ref">PVSMode</span></a></p></td>
<td><p><a class="reference internal" href="#class-roommanager-property-pvs-mode"><span class="std std-ref">pvs_mode</span></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="class_float.html#class-float"><span class="std std-ref">float</span></a></p></td>
<td><p><a class="reference internal" href="#class-roommanager-property-roaming-expansion-margin"><span class="std std-ref">roaming_expansion_margin</span></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1.0</span></code></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="class_float.html#class-float"><span class="std std-ref">float</span></a></p></td>
<td><p><a class="reference internal" href="#class-roommanager-property-room-simplify"><span class="std std-ref">room_simplify</span></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0.5</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="class_nodepath.html#class-nodepath"><span class="std std-ref">NodePath</span></a></p></td>
<td><p><a class="reference internal" href="#class-roommanager-property-roomlist"><span class="std std-ref">roomlist</span></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">NodePath("")</span></code></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="class_bool.html#class-bool"><span class="std std-ref">bool</span></a></p></td>
<td><p><a class="reference internal" href="#class-roommanager-property-show-margins"><span class="std std-ref">show_margins</span></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="class_bool.html#class-bool"><span class="std std-ref">bool</span></a></p></td>
<td><p><a class="reference internal" href="#class-roommanager-property-use-secondary-pvs"><span class="std std-ref">use_secondary_pvs</span></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="methods">
<h2>Methods<a class="headerlink" href="#methods" title="Permalink to this headline">¶</a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 8%"/>
<col style="width: 93%"/>
</colgroup>
<tbody>
<tr class="row-odd"><td><p>void</p></td>
<td><p><a class="reference internal" href="#class-roommanager-method-rooms-clear"><span class="std std-ref">rooms_clear</span></a> <strong>(</strong> <strong>)</strong></p></td>
</tr>
<tr class="row-even"><td><p>void</p></td>
<td><p><a class="reference internal" href="#class-roommanager-method-rooms-convert"><span class="std std-ref">rooms_convert</span></a> <strong>(</strong> <strong>)</strong></p></td>
</tr>
</tbody>
</table>
</section>
<section id="enumerations">
<h2>Enumerations<a class="headerlink" href="#enumerations" title="Permalink to this headline">¶</a></h2>
<p id="class-roommanager-constant-pvs-mode-full"><span id="class-roommanager-constant-pvs-mode-partial"></span><span id="class-roommanager-constant-pvs-mode-disabled"></span><span id="enum-roommanager-pvsmode"></span>enum <strong><a class="dashAnchor" name="//apple_ref/cpp/Enum/PVSMode"></a>PVSMode</strong>:</p>
<ul class="simple">
<li><p><strong>PVS_MODE_DISABLED</strong> = <strong>0</strong> --- Use only <a class="reference internal" href="class_portal.html#class-portal"><span class="std std-ref">Portal</span></a>s at runtime to determine visibility. PVS will not be generated at <a class="reference internal" href="class_room.html#class-room"><span class="std std-ref">Room</span></a>s conversion, and gameplay notifications cannot be used.</p></li>
<li><p><strong>PVS_MODE_PARTIAL</strong> = <strong>1</strong> --- Use a combination of PVS and <a class="reference internal" href="class_portal.html#class-portal"><span class="std std-ref">Portal</span></a>s to determine visibility (this is usually fastest and most accurate).</p></li>
<li><p><strong>PVS_MODE_FULL</strong> = <strong>2</strong> --- Use only the PVS (potentially visible set) of <a class="reference internal" href="class_room.html#class-room"><span class="std std-ref">Room</span></a>s to determine visibility.</p></li>
</ul>
</section>
<section id="property-descriptions">
<h2>Property Descriptions<a class="headerlink" href="#property-descriptions" title="Permalink to this headline">¶</a></h2>
<ul class="simple" id="class-roommanager-property-active">
<li><p><a class="reference internal" href="class_bool.html#class-bool"><span class="std std-ref">bool</span></a> <strong><a class="dashAnchor" name="//apple_ref/cpp/Property/active"></a>active</strong></p></li>
</ul>
<table class="docutils align-default">
<colgroup>
<col style="width: 31%"/>
<col style="width: 69%"/>
</colgroup>
<tbody>
<tr class="row-odd"><td><p><em>Default</em></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
</tr>
<tr class="row-even"><td><p><em>Setter</em></p></td>
<td><p>rooms_set_active(value)</p></td>
</tr>
<tr class="row-odd"><td><p><em>Getter</em></p></td>
<td><p>rooms_get_active()</p></td>
</tr>
</tbody>
</table>
<p>Switches the portal culling system on and off.</p>
<p>It is important to note that when portal culling is active, it is responsible for <strong>all</strong> the 3d culling. Some editor functionality may be more difficult to use, so switching the active flag is intended to be used to make sure your <a class="reference internal" href="class_room.html#class-room"><span class="std std-ref">Room</span></a> / <a class="reference internal" href="class_portal.html#class-portal"><span class="std std-ref">Portal</span></a> layout works within the editor.</p>
<p>Switching to <code class="docutils literal notranslate"><span class="pre">active</span></code> will have no effect when the <code class="docutils literal notranslate"><span class="pre">room</span> <span class="pre">graph</span></code> is unloaded (the rooms have not yet been converted).</p>
<hr class="docutils"/>
<ul class="simple" id="class-roommanager-property-debug-sprawl">
<li><p><a class="reference internal" href="class_bool.html#class-bool"><span class="std std-ref">bool</span></a> <strong><a class="dashAnchor" name="//apple_ref/cpp/Property/debug_sprawl"></a>debug_sprawl</strong></p></li>
</ul>
<table class="docutils align-default">
<colgroup>
<col style="width: 31%"/>
<col style="width: 69%"/>
</colgroup>
<tbody>
<tr class="row-odd"><td><p><em>Default</em></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
</tr>
<tr class="row-even"><td><p><em>Setter</em></p></td>
<td><p>set_debug_sprawl(value)</p></td>
</tr>
<tr class="row-odd"><td><p><em>Getter</em></p></td>
<td><p>get_debug_sprawl()</p></td>
</tr>
</tbody>
</table>
<p>Large objects can 'sprawl' over (be present in) more than one room. It can be useful to visualize which objects are sprawling outside the current room.</p>
<p>Toggling this setting turns this debug view on and off.</p>
<hr class="docutils"/>
<ul class="simple" id="class-roommanager-property-default-portal-margin">
<li><p><a class="reference internal" href="class_float.html#class-float"><span class="std std-ref">float</span></a> <strong><a class="dashAnchor" name="//apple_ref/cpp/Property/default_portal_margin"></a>default_portal_margin</strong></p></li>
</ul>
<table class="docutils align-default">
<colgroup>
<col style="width: 24%"/>
<col style="width: 76%"/>
</colgroup>
<tbody>
<tr class="row-odd"><td><p><em>Default</em></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1.0</span></code></p></td>
</tr>
<tr class="row-even"><td><p><em>Setter</em></p></td>
<td><p>set_default_portal_margin(value)</p></td>
</tr>
<tr class="row-odd"><td><p><em>Getter</em></p></td>
<td><p>get_default_portal_margin()</p></td>
</tr>
</tbody>
</table>
<p>Usually we don't want objects that only <strong>just</strong> cross a boundary into an adjacent <a class="reference internal" href="class_room.html#class-room"><span class="std std-ref">Room</span></a> to sprawl into that room. To prevent this, each <a class="reference internal" href="class_portal.html#class-portal"><span class="std std-ref">Portal</span></a> has an extra margin, or tolerance zone where objects can enter without sprawling to a neighbouring room.</p>
<p>In most cases you can set this here for all portals. It is possible to override the margin for each portal.</p>
<hr class="docutils"/>
<ul class="simple" id="class-roommanager-property-gameplay-monitor">
<li><p><a class="reference internal" href="class_bool.html#class-bool"><span class="std std-ref">bool</span></a> <strong><a class="dashAnchor" name="//apple_ref/cpp/Property/gameplay_monitor"></a>gameplay_monitor</strong></p></li>
</ul>
<table class="docutils align-default">
<colgroup>
<col style="width: 23%"/>
<col style="width: 77%"/>
</colgroup>
<tbody>
<tr class="row-odd"><td><p><em>Default</em></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
</tr>
<tr class="row-even"><td><p><em>Setter</em></p></td>
<td><p>set_gameplay_monitor_enabled(value)</p></td>
</tr>
<tr class="row-odd"><td><p><em>Getter</em></p></td>
<td><p>get_gameplay_monitor_enabled()</p></td>
</tr>
</tbody>
</table>
<p>When using a partial or full PVS, the gameplay monitor allows you to receive callbacks when roaming objects or rooms enter or exit the <strong>gameplay area</strong>. The gameplay area is defined as either the primary, or secondary PVS.</p>
<p>These callbacks allow you to, for example, reduce processing for objects that are far from the player, or turn on and off AI.</p>
<p>You can either choose to receive callbacks as notifications through the <code class="docutils literal notranslate"><span class="pre">_notification</span></code> function, or as signals.</p>
<p><code class="docutils literal notranslate"><span class="pre">NOTIFICATION_ENTER_GAMEPLAY</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">NOTIFICATION_EXIT_GAMEPLAY</span></code></p>
<p>Signals: <code class="docutils literal notranslate"><span class="pre">"gameplay_entered"</span></code>, <code class="docutils literal notranslate"><span class="pre">"gameplay_exited"</span></code></p>
<hr class="docutils"/>
<ul class="simple" id="class-roommanager-property-merge-meshes">
<li><p><a class="reference internal" href="class_bool.html#class-bool"><span class="std std-ref">bool</span></a> <strong><a class="dashAnchor" name="//apple_ref/cpp/Property/merge_meshes"></a>merge_meshes</strong></p></li>
</ul>
<table class="docutils align-default">
<colgroup>
<col style="width: 31%"/>
<col style="width: 69%"/>
</colgroup>
<tbody>
<tr class="row-odd"><td><p><em>Default</em></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
</tr>
<tr class="row-even"><td><p><em>Setter</em></p></td>
<td><p>set_merge_meshes(value)</p></td>
</tr>
<tr class="row-odd"><td><p><em>Getter</em></p></td>
<td><p>get_merge_meshes()</p></td>
</tr>
</tbody>
</table>
<p>If enabled, the system will attempt to merge similar meshes (particularly in terms of materials) within <a class="reference internal" href="class_room.html#class-room"><span class="std std-ref">Room</span></a>s during conversion. This can significantly reduce the number of drawcalls and state changes required during rendering, albeit at a cost of reduced culling granularity.</p>
<p><strong>Note:</strong> This operates at runtime during the conversion process, and will only operate on exported or running projects, in order to prevent accidental alteration to the scene and loss of data.</p>
<hr class="docutils"/>
<ul class="simple" id="class-roommanager-property-overlap-warning-threshold">
<li><p><a class="reference internal" href="class_int.html#class-int"><span class="std std-ref">int</span></a> <strong><a class="dashAnchor" name="//apple_ref/cpp/Property/overlap_warning_threshold"></a>overlap_warning_threshold</strong></p></li>
</ul>
<table class="docutils align-default">
<colgroup>
<col style="width: 22%"/>
<col style="width: 78%"/>
</colgroup>
<tbody>
<tr class="row-odd"><td><p><em>Default</em></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1</span></code></p></td>
</tr>
<tr class="row-even"><td><p><em>Setter</em></p></td>
<td><p>set_overlap_warning_threshold(value)</p></td>
</tr>
<tr class="row-odd"><td><p><em>Getter</em></p></td>
<td><p>get_overlap_warning_threshold()</p></td>
</tr>
</tbody>
</table>
<p>When converting rooms, the editor will warn you if overlap is detected between rooms. Overlap can interfere with determining the room that cameras and objects are within. A small amount can be acceptable, depending on your level. Here you can alter the threshold at which the editor warning appears. There are no other side effects.</p>
<hr class="docutils"/>
<ul class="simple" id="class-roommanager-property-portal-depth-limit">
<li><p><a class="reference internal" href="class_int.html#class-int"><span class="std std-ref">int</span></a> <strong><a class="dashAnchor" name="//apple_ref/cpp/Property/portal_depth_limit"></a>portal_depth_limit</strong></p></li>
</ul>
<table class="docutils align-default">
<colgroup>
<col style="width: 26%"/>
<col style="width: 74%"/>
</colgroup>
<tbody>
<tr class="row-odd"><td><p><em>Default</em></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">16</span></code></p></td>
</tr>
<tr class="row-even"><td><p><em>Setter</em></p></td>
<td><p>set_portal_depth_limit(value)</p></td>
</tr>
<tr class="row-odd"><td><p><em>Getter</em></p></td>
<td><p>get_portal_depth_limit()</p></td>
</tr>
</tbody>
</table>
<p>Portal rendering is recursive - each time a portal is seen through an earlier portal there is some cost. For this reason, and to prevent the possibility of infinite loops, this setting provides a hard limit on the recursion depth.</p>
<p><strong>Note:</strong> This value is unused when using <code class="docutils literal notranslate"><span class="pre">Full</span></code> PVS mode.</p>
<hr class="docutils"/>
<ul class="simple" id="class-roommanager-property-preview-camera">
<li><p><a class="reference internal" href="class_nodepath.html#class-nodepath"><span class="std std-ref">NodePath</span></a> <strong><a class="dashAnchor" name="//apple_ref/cpp/Property/preview_camera"></a>preview_camera</strong></p></li>
</ul>
<table class="docutils align-default">
<colgroup>
<col style="width: 26%"/>
<col style="width: 74%"/>
</colgroup>
<tbody>
<tr class="row-odd"><td><p><em>Default</em></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">NodePath("")</span></code></p></td>
</tr>
<tr class="row-even"><td><p><em>Setter</em></p></td>
<td><p>set_preview_camera_path(value)</p></td>
</tr>
<tr class="row-odd"><td><p><em>Getter</em></p></td>
<td><p>get_preview_camera_path()</p></td>
</tr>
</tbody>
</table>
<p>Portal culling normally operates using the current <a class="reference internal" href="class_camera.html#class-camera"><span class="std std-ref">Camera</span></a> / <a class="reference internal" href="class_camera.html#class-camera"><span class="std std-ref">Camera</span></a>s, however for debugging purposes within the editor, you can use this setting to override this behaviour and force it to use a particular camera to get a better idea of what the occlusion culling is doing.</p>
<hr class="docutils"/>
<ul class="simple" id="class-roommanager-property-pvs-mode">
<li><p><a class="reference internal" href="#enum-roommanager-pvsmode"><span class="std std-ref">PVSMode</span></a> <strong><a class="dashAnchor" name="//apple_ref/cpp/Property/pvs_mode"></a>pvs_mode</strong></p></li>
</ul>
<table class="docutils align-default">
<colgroup>
<col style="width: 34%"/>
<col style="width: 66%"/>
</colgroup>
<tbody>
<tr class="row-odd"><td><p><em>Default</em></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1</span></code></p></td>
</tr>
<tr class="row-even"><td><p><em>Setter</em></p></td>
<td><p>set_pvs_mode(value)</p></td>
</tr>
<tr class="row-odd"><td><p><em>Getter</em></p></td>
<td><p>get_pvs_mode()</p></td>
</tr>
</tbody>
</table>
<p>Optionally during conversion the potentially visible set (PVS) of rooms that are potentially visible from each room can be calculated. This can be used either to aid in dynamic portal culling, or to totally replace portal culling.</p>
<p>In <code class="docutils literal notranslate"><span class="pre">Full</span></code> PVS Mode, all objects within the potentially visible rooms will be frustum culled, and rendered if they are within the view frustum.</p>
<hr class="docutils"/>
<ul class="simple" id="class-roommanager-property-roaming-expansion-margin">
<li><p><a class="reference internal" href="class_float.html#class-float"><span class="std std-ref">float</span></a> <strong><a class="dashAnchor" name="//apple_ref/cpp/Property/roaming_expansion_margin"></a>roaming_expansion_margin</strong></p></li>
</ul>
<table class="docutils align-default">
<colgroup>
<col style="width: 23%"/>
<col style="width: 77%"/>
</colgroup>
<tbody>
<tr class="row-odd"><td><p><em>Default</em></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1.0</span></code></p></td>
</tr>
<tr class="row-even"><td><p><em>Setter</em></p></td>
<td><p>set_roaming_expansion_margin(value)</p></td>
</tr>
<tr class="row-odd"><td><p><em>Getter</em></p></td>
<td><p>get_roaming_expansion_margin()</p></td>
</tr>
</tbody>
</table>
<p>In order to reduce processing for roaming objects, an expansion is applied to their AABB as they move. This expanded volume is used to calculate which rooms the roaming object is within. If the object's exact AABB is still within this expanded volume on the next move, there is no need to reprocess the object, which can save considerable CPU.</p>
<p>The downside is that if the expansion is too much, the object may end up unexpectedly sprawling into neighbouring rooms and showing up where it might otherwise be culled.</p>
<p>In order to balance roaming performance against culling accuracy, this expansion margin can be customized by the user. It will typically depend on your room and object sizes, and movement speeds. The default value should work reasonably in most circumstances.</p>
<hr class="docutils"/>
<ul class="simple" id="class-roommanager-property-room-simplify">
<li><p><a class="reference internal" href="class_float.html#class-float"><span class="std std-ref">float</span></a> <strong><a class="dashAnchor" name="//apple_ref/cpp/Property/room_simplify"></a>room_simplify</strong></p></li>
</ul>
<table class="docutils align-default">
<colgroup>
<col style="width: 30%"/>
<col style="width: 70%"/>
</colgroup>
<tbody>
<tr class="row-odd"><td><p><em>Default</em></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0.5</span></code></p></td>
</tr>
<tr class="row-even"><td><p><em>Setter</em></p></td>
<td><p>set_room_simplify(value)</p></td>
</tr>
<tr class="row-odd"><td><p><em>Getter</em></p></td>
<td><p>get_room_simplify()</p></td>
</tr>
</tbody>
</table>
<p>During the conversion process, the geometry of objects within <a class="reference internal" href="class_room.html#class-room"><span class="std std-ref">Room</span></a>s, or a custom specified manual bound, are used to generate a <strong>convex hull bound</strong>.</p>
<p>This convex hull is <strong>required</strong> in the visibility system, and is used for many purposes. Most importantly, it is used to decide whether the <a class="reference internal" href="class_camera.html#class-camera"><span class="std std-ref">Camera</span></a> (or an object) is within a <a class="reference internal" href="class_room.html#class-room"><span class="std std-ref">Room</span></a>. The convex hull generating algorithm is good, but occasionally it can create too many (or too few) planes to give a good representation of the room volume.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">room_simplify</span></code> value can be used to gain fine control over this process. It determines how similar planes can be for them to be considered the same (and duplicates removed). The value can be set between 0 (no simplification) and 1 (maximum simplification).</p>
<p>The value set here is the default for all rooms, but individual rooms can override this value if desired.</p>
<p>The room convex hulls are shown as a wireframe in the editor.</p>
<hr class="docutils"/>
<ul class="simple" id="class-roommanager-property-roomlist">
<li><p><a class="reference internal" href="class_nodepath.html#class-nodepath"><span class="std std-ref">NodePath</span></a> <strong><a class="dashAnchor" name="//apple_ref/cpp/Property/roomlist"></a>roomlist</strong></p></li>
</ul>
<table class="docutils align-default">
<colgroup>
<col style="width: 30%"/>
<col style="width: 70%"/>
</colgroup>
<tbody>
<tr class="row-odd"><td><p><em>Default</em></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">NodePath("")</span></code></p></td>
</tr>
<tr class="row-even"><td><p><em>Setter</em></p></td>
<td><p>set_roomlist_path(value)</p></td>
</tr>
<tr class="row-odd"><td><p><em>Getter</em></p></td>
<td><p>get_roomlist_path()</p></td>
</tr>
</tbody>
</table>
<p>For the <a class="reference internal" href="class_room.html#class-room"><span class="std std-ref">Room</span></a> conversion process to succeed, you must point the <code class="docutils literal notranslate"><span class="pre">RoomManager</span></code> to the parent <a class="reference internal" href="class_node.html#class-node"><span class="std std-ref">Node</span></a> of your <a class="reference internal" href="class_room.html#class-room"><span class="std std-ref">Room</span></a>s and <a class="reference internal" href="class_roomgroup.html#class-roomgroup"><span class="std std-ref">RoomGroup</span></a>s, which we refer to as the <code class="docutils literal notranslate"><span class="pre">roomlist</span></code> (the roomlist is not a special node type, it is normally just a <a class="reference internal" href="class_spatial.html#class-spatial"><span class="std std-ref">Spatial</span></a>).</p>
<hr class="docutils"/>
<ul class="simple" id="class-roommanager-property-show-margins">
<li><p><a class="reference internal" href="class_bool.html#class-bool"><span class="std std-ref">bool</span></a> <strong><a class="dashAnchor" name="//apple_ref/cpp/Property/show_margins"></a>show_margins</strong></p></li>
</ul>
<table class="docutils align-default">
<colgroup>
<col style="width: 31%"/>
<col style="width: 69%"/>
</colgroup>
<tbody>
<tr class="row-odd"><td><p><em>Default</em></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
</tr>
<tr class="row-even"><td><p><em>Setter</em></p></td>
<td><p>set_show_margins(value)</p></td>
</tr>
<tr class="row-odd"><td><p><em>Getter</em></p></td>
<td><p>get_show_margins()</p></td>
</tr>
</tbody>
</table>
<p>Shows the <a class="reference internal" href="class_portal.html#class-portal"><span class="std std-ref">Portal</span></a> margins when the portal gizmo is used in the editor.</p>
<hr class="docutils"/>
<ul class="simple" id="class-roommanager-property-use-secondary-pvs">
<li><p><a class="reference internal" href="class_bool.html#class-bool"><span class="std std-ref">bool</span></a> <strong><a class="dashAnchor" name="//apple_ref/cpp/Property/use_secondary_pvs"></a>use_secondary_pvs</strong></p></li>
</ul>
<table class="docutils align-default">
<colgroup>
<col style="width: 27%"/>
<col style="width: 73%"/>
</colgroup>
<tbody>
<tr class="row-odd"><td><p><em>Default</em></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
</tr>
<tr class="row-even"><td><p><em>Setter</em></p></td>
<td><p>set_use_secondary_pvs(value)</p></td>
</tr>
<tr class="row-odd"><td><p><em>Getter</em></p></td>
<td><p>get_use_secondary_pvs()</p></td>
</tr>
</tbody>
</table>
<p>When receiving gameplay callbacks when objects enter and exit gameplay, the <strong>gameplay area</strong> can be defined by either the primary PVS (potentially visible set) of <a class="reference internal" href="class_room.html#class-room"><span class="std std-ref">Room</span></a>s, or the secondary PVS (the primary PVS and their neighbouring <a class="reference internal" href="class_room.html#class-room"><span class="std std-ref">Room</span></a>s).</p>
<p>Sometimes using the larger gameplay area of the secondary PVS may be preferable.</p>
</section>
<section id="method-descriptions">
<h2>Method Descriptions<a class="headerlink" href="#method-descriptions" title="Permalink to this headline">¶</a></h2>
<ul class="simple" id="class-roommanager-method-rooms-clear">
<li><p>void <strong><a class="dashAnchor" name="//apple_ref/cpp/Method/rooms_clear"></a>rooms_clear</strong> <strong>(</strong> <strong>)</strong></p></li>
</ul>
<p>This function clears all converted data from the <strong>room graph</strong>. Use this before unloading a level, when transitioning from level to level, or returning to a main menu.</p>
<hr class="docutils"/>
<ul class="simple" id="class-roommanager-method-rooms-convert">
<li><p>void <strong><a class="dashAnchor" name="//apple_ref/cpp/Method/rooms_convert"></a>rooms_convert</strong> <strong>(</strong> <strong>)</strong></p></li>
</ul>
<p>This is the most important function in the whole portal culling system. Without it, the system cannot function.</p>
<p>First it goes through every <a class="reference internal" href="class_room.html#class-room"><span class="std std-ref">Room</span></a> that is a child of the <code class="docutils literal notranslate"><span class="pre">room</span> <span class="pre">list</span></code> node (and <a class="reference internal" href="class_roomgroup.html#class-roomgroup"><span class="std std-ref">RoomGroup</span></a>s within) and converts and adds it to the <code class="docutils literal notranslate"><span class="pre">room</span> <span class="pre">graph</span></code>.</p>
<p>This works for both <a class="reference internal" href="class_room.html#class-room"><span class="std std-ref">Room</span></a> nodes, and <a class="reference internal" href="class_spatial.html#class-spatial"><span class="std std-ref">Spatial</span></a> nodes that follow a special naming convention. They should begin with the prefix <em>'Room_'</em>, followed by the name you wish to give the room, e.g. <em>'Room_lounge'</em>. This will automatically convert such <a class="reference internal" href="class_spatial.html#class-spatial"><span class="std std-ref">Spatial</span></a>s to <a class="reference internal" href="class_room.html#class-room"><span class="std std-ref">Room</span></a> nodes for you. This is useful if you want to build you entire room system in e.g. Blender, and reimport multiple times as you work on the level.</p>
<p>The conversion will try to assign <a class="reference internal" href="class_visualinstance.html#class-visualinstance"><span class="std std-ref">VisualInstance</span></a>s that are children and grandchildren of the <a class="reference internal" href="class_room.html#class-room"><span class="std std-ref">Room</span></a> to the room. These should be given a suitable <code class="docutils literal notranslate"><span class="pre">portal</span> <span class="pre">mode</span></code> (see the <a class="reference internal" href="class_cullinstance.html#class-cullinstance"><span class="std std-ref">CullInstance</span></a> documentation). The default <code class="docutils literal notranslate"><span class="pre">portal</span> <span class="pre">mode</span></code> is <code class="docutils literal notranslate"><span class="pre">STATIC</span></code> - objects which are not expected to move while the level is played, which will typically be most objects.</p>
<p>The conversion will usually use the geometry of these <a class="reference internal" href="class_visualinstance.html#class-visualinstance"><span class="std std-ref">VisualInstance</span></a>s (and the <a class="reference internal" href="class_portal.html#class-portal"><span class="std std-ref">Portal</span></a>s) to calculate a convex hull bound for the room. These bounds will be shown in the editor with a wireframe. Alternatively you can specify a manual custom bound for any room, see the <a class="reference internal" href="class_room.html#class-room"><span class="std std-ref">Room</span></a> documentation.</p>
<p>By definition, <a class="reference internal" href="class_camera.html#class-camera"><span class="std std-ref">Camera</span></a>s within a room can see everything else within the room (that is one advantage to using convex hulls). However, in order to see from one room into adjacent rooms, you must place <a class="reference internal" href="class_portal.html#class-portal"><span class="std std-ref">Portal</span></a>s, which represent openings that the camera can see through, like windows and doors.</p>
<p><a class="reference internal" href="class_portal.html#class-portal"><span class="std std-ref">Portal</span></a>s are really just specialized <a class="reference internal" href="class_meshinstance.html#class-meshinstance"><span class="std std-ref">MeshInstance</span></a>s. In fact you will usually first create a portal by creating a <a class="reference internal" href="class_meshinstance.html#class-meshinstance"><span class="std std-ref">MeshInstance</span></a>, especially a <code class="docutils literal notranslate"><span class="pre">plane</span></code> mesh instance. You would move the plane in the editor to cover a window or doorway, with the front face pointing outward from the room. To let the conversion process know you want this mesh to be a portal, again we use a special naming convention. <a class="reference internal" href="class_meshinstance.html#class-meshinstance"><span class="std std-ref">MeshInstance</span></a>s to be converted to a <a class="reference internal" href="class_portal.html#class-portal"><span class="std std-ref">Portal</span></a> should start with the prefix <em>'Portal_'</em>.</p>
<p>You now have a choice - you can leave the name as <em>'Portal_'</em> and allow the system to automatically detect the nearest <a class="reference internal" href="class_room.html#class-room"><span class="std std-ref">Room</span></a> to link. In most cases this will work fine.</p>
<p>An alternative method is to specify the <a class="reference internal" href="class_room.html#class-room"><span class="std std-ref">Room</span></a> to link to manually, appending a suffix to the portal name, which should be the name of the room you intend to link to. For example <em>'Portal_lounge'</em> will attempt to link to the room named <em>'Room_lounge'</em>.</p>
<p>There is a special case here - Godot does not allow two nodes to share the same name. What if you want to manually have more than one portal leading into the same room? Surely they will need to both be called, e.g. <em>'Portal_lounge'</em>?</p>
<p>The solution is a wildcard character. After the room name, if you use the character <em>'*'</em>, this character and anything following it will be ignored. So you can use for example <em>'Portal_lounge*0'</em>, <em>'Portal_lounge*1'</em> etc.</p>
<p>Note that <a class="reference internal" href="class_portal.html#class-portal"><span class="std std-ref">Portal</span></a>s that have already been converted to <a class="reference internal" href="class_portal.html#class-portal"><span class="std std-ref">Portal</span></a> nodes (rather than <a class="reference internal" href="class_meshinstance.html#class-meshinstance"><span class="std std-ref">MeshInstance</span></a>s) still need to follow the same naming convention, as they will be relinked each time during conversion.</p>
<p>It is recommended that you only place objects in rooms that are desired to stay within those rooms - i.e. <code class="docutils literal notranslate"><span class="pre">portal</span> <span class="pre">mode</span></code>s <code class="docutils literal notranslate"><span class="pre">STATIC</span></code> or <code class="docutils literal notranslate"><span class="pre">DYNAMIC</span></code> (not crossing portals). <code class="docutils literal notranslate"><span class="pre">GLOBAL</span></code> and <code class="docutils literal notranslate"><span class="pre">ROAMING</span></code> objects are best placed in another part of the scene tree, to avoid confusion. See <a class="reference internal" href="class_cullinstance.html#class-cullinstance"><span class="std std-ref">CullInstance</span></a> for a full description of portal modes.</p>
</section>
</section>
</div>
</div>
<footer><div aria-label="Footer" class="rst-footer-buttons" role="navigation">
<a accesskey="p" class="btn btn-neutral float-left" href="class_roomgroup.html" rel="prev" title="RoomGroup"><span aria-hidden="true" class="fa fa-arrow-circle-left"></span> Previous</a>
<a accesskey="n" class="btn btn-neutral float-right" href="class_rootmotionview.html" rel="next" title="RootMotionView">Next <span aria-hidden="true" class="fa fa-arrow-circle-right"></span></a>
</div>
<hr/>
<div role="contentinfo">
<p>© Copyright 2014-2022, Juan Linietsky, Ariel Manzur and the Godot community (CC-BY 3.0).</p>
</div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
</div>
</div>
</section>
</div>
<script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
</body>
</html>